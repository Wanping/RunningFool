window.__require=function e(t,n,o){function i(s,c){if(!n[s]){if(!t[s]){var a=s.split("/");if(a=a[a.length-1],!t[a]){var l="function"==typeof __require&&__require;if(!c&&l)return l(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){return i(t[s][1][e]||e)},u,u.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<o.length;s++)i(o[s]);return i}({LoginController:[function(e,t,n){"use strict";cc._RF.push(t,"b4a01BbvLxDTZ/qYVUettBq","LoginController");var o=e("gameDef"),i=e("singleton"),r=e("wechatSdk"),s=e("eventCenter"),c=e("eventDef");cc.Class({extends:cc.Component,properties:{ProgressBar:{type:cc.ProgressBar,default:null},LabelTip:{type:cc.Label,default:null},NodeBtnLogin:{type:cc.Node,default:null}},onLoad:function(){i.curScene=o.Scene.Login,this.LabelTip.node.active=!1,this.ProgressBar.node.active=!1,this.registerEvent(),this.initLoginModule()},onDestroy:function(){this.unregisterEvent()},registerEvent:function(){s.addEventObserver(c.PreloadScene,this.preloadAllScene,this)},unregisterEvent:function(){s.removeEventObserver(c.PreloadScene,this.preloadAllScene,this)},initLoginModule:function(){this.wechatSdk=new r},onClickWxLogin:function(){this.hideLoginBtn(),this.wechatSdk.isWeChat()?this.wechatSdk.login():this.preloadAllScene()},preloadAllScene:function(){var e=this;this.hideLoginBtn(),this.LabelTip.node.active=!0,this.ProgressBar.node.active=!0;i.loadManager.loadAllScene(function(t){if(e.ProgressBar){if(t>=100)return e.ProgressBar.progress=100,void(e.LabelTip.string="\u6b63\u5728\u8fdb\u5165\u6e38\u620f\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\uff5e");e.ProgressBar.progress=t,e.LabelTip.string="\u6b63\u5728\u8fdb\u5165\u6e38\u620f\uff0c\u5f53\u524d\u52a0\u8f7d "+(100*t).toFixed(2)+"%",console.log("\u6b63\u5728\u8fdb\u5165\u6e38\u620f\uff0c\u5f53\u524d\u52a0\u8f7d "+(100*t).toFixed(2)+"%")}},function(){cc.director.loadScene(o.Scene.Hall)})},hideLoginBtn:function(){this.node&&(this.NodeBtnLogin.active=!1)}}),cc._RF.pop()},{eventCenter:"eventCenter",eventDef:"eventDef",gameDef:"gameDef",singleton:"singleton",wechatSdk:"wechatSdk"}],eventCenter:[function(e,t,n){"use strict";function o(){this.head=null,this.iter=null,this.length=0,o.prototype.getLength=function(){return this.length},o.prototype.addObserver=function(e,t){if(null!=e){if(null==this.head)return this.head={ob:e,target:t,next:null},void(this.length=1);for(var n=this.head,o=null;null!=n;){if(n.ob===e&&n.target===t)return;o=n,n=n.next}this.length+=1,o.next={ob:e,target:t,next:null}}},o.prototype.removeObserver=function(e,t){if(null!=e&&null!=this.head){if(this.head.ob===e&&this.head.target===t)return this.head===this.iter&&(this.iter=this.iter.next),this.head=this.head.next,void this.length--;for(var n=this.head;null!=n.next;){if(n.next.ob===e&&n.next.target===t)return this.iter===n.next&&(this.iter=n.next.next),n.next=n.next.next,void this.length--;n=n.next}}},o.prototype.removeAll=function(){this.iter=null,this.head=null,this.length=0},o.prototype.emitByArray=function(e){for(this.iter=this.head;null!=this.iter;){var t=this.iter;t.target?t.ob.call(t.target,e):t.ob(e),this.iter&&t===this.iter&&(this.iter=this.iter.next)}this.iter=null},o.prototype.emit=function(){for(this.iter=this.head;null!=this.iter;){var e,t=this.iter;if(t.target)(e=t.ob).call.apply(e,[t.target].concat(Array.prototype.slice.call(arguments)));else t.ob.apply(t,arguments);this.iter&&t===this.iter&&(this.iter=this.iter.next)}this.iter=null}}cc._RF.push(t,"e7046XkjOZCpI7J1RIO+H/j","eventCenter");var i={_eventGroup:{},getEventGroup:function(e){return i._eventGroup[e]},addEventObserver:function(e,t,n){if(null!=e){var r=i.getEventGroup(e);r||(r=new o,i._eventGroup[e]=r),r.addObserver(t,n)}else console.log("addEventObserver evt is null")},removeEventObserver:function(e,t,n){if(null!=e){var o=i.getEventGroup(e);o||(o.removeObserver(t,n),0===o.getLength()&&delete i._eventGroup[e])}else console.log("removeEventObserver evt is null")},emitEvent:function(e){if(null!=e){var t=i.getEventGroup(e);if(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];t.emit.apply(t,o)}}else console.log("emitEvent evt is null")},emitEventByArray:function(e,t){if(null!=e){var n=i.getEventGroup(e);n&&n.emitByArray(t)}else console.log("emitEventByArray evt is null")},removeAll:function(){var e=i._eventGroup;for(var t in e)e[t].removeAll();i._eventGroup=null}};t.exports=i,cc._RF.pop()},{}],eventDef:[function(e,t,n){"use strict";cc._RF.push(t,"41040SEeF5P6arEQq3q1COQ","eventDef");var o={PreloadScene:"PreloadScene"};t.exports=o,cc._RF.pop()},{}],gameDef:[function(e,t,n){"use strict";cc._RF.push(t,"0ff59d3SPlA/ZrCBzM9ObAz","gameDef");var o={SceneArray:["login","hall","game"],Scene:{Login:"login",Hall:"hall",Game:"game"},Mode:{Normal:0,Crazy:1}};t.exports=o,cc._RF.pop()},{}],hallController:[function(e,t,n){"use strict";cc._RF.push(t,"8d089zVO3BAs4u3z+FwP01o","hallController");var o=e("gameDef"),i=e("singleton");cc.Class({extends:cc.Component,properties:{NodeBtnNormal:{type:cc.Node,default:null},NodeBtnCrazy:{type:cc.Node,default:null}},onLoad:function(){i.curScene=o.Scene.Hall},start:function(){this.startNodeBtnAnim()},startNodeBtnAnim:function(){this.NodeBtnNormal.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.3,cc.v2(0,10)),cc.moveBy(.3,cc.v2(0,-10))))),this.NodeBtnCrazy.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.3,cc.v2(0,10)),cc.moveBy(.3,cc.v2(0,-10)))))},onClickNormalBtn:function(){i.curGameMode=o.Mode.Normal,cc.director.loadScene(o.Scene.Game)},onClickCrazyBtn:function(){i.curGameMode=o.Mode.Crazy,cc.director.loadScene(o.Scene.Game)}}),cc._RF.pop()},{gameDef:"gameDef",singleton:"singleton"}],loadResource:[function(e,t,n){"use strict";cc._RF.push(t,"ef229mugkRCAJepadAeyvu7","loadResource");var o=e("gameDef");cc.Class({extends:cc.Component,ctor:function(){},loadAllScene:function(e,t){for(var n=o.SceneArray,i=function(t,n){e&&e(t/n)},r=function(){t&&t()},s=0;s<n.length;s++)cc.director.preloadScene(n[s],i,r)}}),cc._RF.pop()},{gameDef:"gameDef"}],main:[function(e,t,n){"use strict";cc._RF.push(t,"8479b9tizNEXL684Aj2/SWf","main");var o=e("singleton"),i=e("userData"),r=e("loadResource");cc.Class({extends:cc.Component,properties:{},onLoad:function(){cc.game.addPersistRootNode(this.node),this.initGameData(),this.initGameScene(),this.initGameStation(),this.initGameMode(),this.initGameUtils()},onDestroy:function(){o.userData.release()},start:function(){},initGameScene:function(){o.curScene&&(delete o.curScene,o.curScene=null)},initGameMode:function(){o.curGameMode&&(delete o.curGameMode,o.curGameMode=null)},initGameStation:function(){o.curGameStation&&(delete o.curGameStation,o.curGameStation=null)},initGameData:function(){o.userData&&(delete o.curGameMode,o.curGameMode=null),o.userData=new i},initGameUtils:function(){o.loadManager=new r}}),cc._RF.pop()},{loadResource:"loadResource",singleton:"singleton",userData:"userData"}],physicsManager:[function(e,t,n){"use strict";cc._RF.push(t,"90e609yB4RL7oZKGKxwljC9","physicsManager"),cc.Class({extends:cc.Component,properties:{isDebug:{default:null,type:cc.Boolean}},onLoad:function(){var e=cc.director.getPhysicsManager();e.enabled=!0,this.isDebug&&(e.debugDrawFlags=cc.PhysicsManager.DrawBits.e_aabbBit|cc.PhysicsManager.DrawBits.e_pairBit|cc.PhysicsManager.DrawBits.e_centerOfMassBit|cc.PhysicsManager.DrawBits.e_jointBit|cc.PhysicsManager.DrawBits.e_shapeBit)}}),cc._RF.pop()},{}],singleton:[function(e,t,n){"use strict";cc._RF.push(t,"0042cFYsopA6JTKd7xHCAKA","singleton");t.exports={},cc._RF.pop()},{}],userData:[function(e,t,n){"use strict";cc._RF.push(t,"556d9cctf5DZbEZ1gWvUOpH","userData"),cc.Class({extends:cc.Component,ctor:function(){this.resetData()},release:function(){this.resetData()},resetData:function(){this.userWxData=null},setUserWxData:function(e){this.userWxData=e},getUserWxData:function(){return this.userWxData}}),cc._RF.pop()},{}],wechatSdk:[function(e,t,n){"use strict";cc._RF.push(t,"db178cndaVN653+3C3z/ut7","wechatSdk");var o=e("singleton"),i=e("eventCenter"),r=e("eventDef");cc.Class({extends:cc.Component,ctor:function(){console.log("wechatSdk ctor"),this.isWeChat()?(this.userInfo=null,this.userInfoCallback=null,this.wxSessionVaild=this.checkWxSession(),this.initLoginButton()):console.log("The env isn't wechat")},isWeChat:function(){return cc.sys.browserType===cc.sys.BROWSER_TYPE_WECHAT_GAME},checkWxSession:function(){wx.checkSession({success:function(){return!0},fail:function(){return!1}})},login:function(){console.log("wechatSdk login.."),this.successFunc=successFunc,this.wxSessionVaild&&this.getUserInfo()},initLoginButton:function(){var e=this,t=window.wx,n=t.getSystemInfoSync(),s=n.screenWidth,c=n.screenHeight;t.getSetting({success:function(n){if(console.log("UserAuthSetting: "+n.authSetting),n.authSetting["scope.userInfo"])console.log("The user has the scope!"),e.getUserInfo();else{console.log("The user hasn't the scope!");var a=t.createUserInfoButton({type:"text",text:"",style:{left:s/2,top:c/2,width:s,height:c,backgroundColor:"#00000000",color:"#ffffff",fontSize:20,textAlign:"center",lineHeight:c}});a.onTap(function(t){t.userInfo?(e.userInfo=t.userInfo,o.userData.setUserWxData(e.userInfo),i.emitEvent(r.PreloadScene),a.destroy()):console.log("The user cncelled the authorization!")})}}})},getUserInfo:function(){var e=this;wx.getUserInfo({success:function(t){console.log("The userInfo is "+JSON.stringify(t.userInfo)),e.userInfo=t.userInfo,o.userData.setUserWxData(e.userInfo),i.emitEvent(r.PreloadScene)}})}}),cc._RF.pop()},{eventCenter:"eventCenter",eventDef:"eventDef",singleton:"singleton"}]},{},["gameDef","singleton","userData","eventDef","hallController","LoginController","main","eventCenter","loadResource","physicsManager","wechatSdk"]);